model Reward {
  id        String @id @default(cuid())
  programId String

  name       String?
  type       EventType
  rewardType CommissionType      @default(percentage) // TODO: Can we do something better here?
  amount     Int                 @default(0)
  duration   Int?
  interval   CommissionInterval?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  program  Program         @relation(fields: [programId], references: [id], onDelete: Cascade)
  partners PartnerReward[]

  @@index([programId])
}

model PartnerReward {
  id        String @id @default(cuid())
  programId String
  partnerId String
  rewardId  String

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // program Program           @relation(fields: [programId], references: [id], onDelete: Cascade)
  // partner ProgramEnrollment @relation(fields: [partnerId], references: [], onDelete: Cascade)
  reward Reward @relation(fields: [rewardId], references: [id], onDelete: Cascade)

  @@unique([programId, partnerId, rewardId])
  @@index([programId])
  @@index([programId, partnerId])
  @@index([rewardId])
}
