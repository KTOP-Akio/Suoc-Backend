model Reward {
  id        String @id @default(cuid())
  programId String

  name     String?
  event    EventType
  type     CommissionType      @default(percentage)
  amount   Int                 @default(0)
  duration Int?
  interval CommissionInterval?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  program  Program         @relation(fields: [programId], references: [id], onDelete: Cascade)
  partners PartnerReward[]

  @@index([programId])
}

model PartnerReward {
  id                  String @id @default(cuid())
  programEnrollmentId String
  rewardId            String

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  programEnrollment ProgramEnrollment @relation(fields: [programEnrollmentId], references: [id], onDelete: Cascade)
  reward            Reward            @relation(fields: [rewardId], references: [id], onDelete: Cascade)

  @@unique([programEnrollmentId, rewardId])
  @@index(programEnrollmentId)
  @@index(rewardId)
}
