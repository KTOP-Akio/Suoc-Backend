enum ProgramType {
  affiliate
  referral
}

model Program {
  id          String      @id @default(cuid())
  workspaceId String
  name        String
  slug        String      @unique
  logo        String?
  type        ProgramType @default(affiliate)

  // TODO: add more fields for program management flow
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  workspace Project             @relation(fields: [workspaceId], references: [id])
  partners  ProgramEnrollment[]
  payouts   Payout[]

  @@index([workspaceId])
}

model ProgramEnrollment {
  id        String   @id @default(cuid())
  partnerId String
  programId String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  partner Partner @relation(fields: [partnerId], references: [id])
  program Program @relation(fields: [programId], references: [id])

  @@unique([partnerId, programId])
  @@index([programId])
}
